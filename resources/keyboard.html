<div>
	<div>
		<label for="orientation">Orientation:</label>
		<select name="orientation" id="orientation">
			<option value="COL2ROW">Col2Row</option>
			<option value="ROW_2COL">Row2Col</option>
		</select>
		<div name="tab-holder" class="tab-holder">
			{}
			<div class = "tab-new">
				<button class="tab-button" onclick="NewLayer(this)"> + </button>
			</div>
		</div>
		<script>
			function ChangeTab(layer, tabToSelect){{
				allRows = document.querySelectorAll(".layer");
				for(row of allRows){{
					row.classList.add("hide");	
				}}
				toMakeVisibile = document.querySelectorAll("[name=layer" + layer.toString() + "]");
				for(row of toMakeVisibile){{
					row.classList.remove("hide");
				}}
				document.querySelector(".tab-selected").classList.remove("tab-selected");
				tabToSelect.parentElement.classList.add("tab-selected");

			}}

			function NewLayer(child){{
				//Create the new tab
				let newTab = document.querySelector(".tab");
				numTabs = document.querySelectorAll(".tab").length;
				addedTab = document.querySelector(".tab-holder").insertBefore(newTab.cloneNode(true),child.parentElement);
				addedTab.children[0].setAttribute( "onclick", "ChangeTab(" + numTabs.toString() + ",this)" );
				addedTab.children[1].setAttribute( "onclick", "RemoveLayer(" + numTabs.toString() + ",this)" );
				addedTab.children[0].innerHTML = "tab" + (numTabs+1).toString();
				//Maybe we want to select the newly created tab idk right now
				addedTab.classList.remove("tab-selected");
				addedTab.setAttribute("name", "tab" + (numTabs).toString());
				//Create the new layer
				let newLayer = document.querySelector("[name=layer"+(numTabs-1).toString()+"]");
				addedLayer = document.querySelector(".keyboard-container").appendChild(newLayer.cloneNode(true));
				addedLayer.setAttribute("name","layer"+(numTabs).toString()+"");
				addedLayer.classList.add("layer");
				addedLayer.classList.add("hide");
				for(row of addedLayer.children){{
					row.classList.remove("layer-" + (numTabs-1).toString());
					row.classList.add("layer-" + numTabs.toString());
				}}
			}}

			function RemoveLayer(layerNum, tabToRemove){{
				//Remove the current tab
				tabToRemove.parentElement.remove();
				layerToRemove = document.querySelector("[name=layer"+layerNum.toString()+"]");
				layerToRemove.remove();
				console.log("layerNum: " + layerNum);
				for(layer of document.querySelectorAll(".layer")){{
					//loop thru layer and if 
					let curLayer = parseInt(layer.getAttribute("name").slice(-1));
					if(curLayer < layerNum){{ continue;}}
					layer.setAttribute("name", "layer" + (curLayer-1).toString());
				}}
				for(tab of document.querySelectorAll(".tab")){{
					//loop thru layer and if 
					let curTab = parseInt(tab.getAttribute("name").slice(-1));
					
					if(curTab < layerNum){{ console.log("we dont want to do anythiung here"); continue;}}
					tab.children[0].setAttribute("onclick", "ChangeTab(" + (curTab-1).toString() + ",this)");
					tab.children[0].innerHTML = "tab" + (curTab).toString();
					tab.children[1].setAttribute("onclick", "RemoveLayer(" + (curTab-1).toString() + ",this)");
					tab.setAttribute("name", "tab" + (curTab-1).toString());
				}}
	
			}}
		</script>
	</div>
	<div class="keyboard-container">
	{}
	</div>
</div>
